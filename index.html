<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>777 Casino - Memecoin</title>
    <style>
        /* --- G≈Å√ìWNE STYLE I KOLORY --- */
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --green-frog: #22c55e; 
            --red: #ef4444;
            --text: #f8fafc;
            
            /* KOLORY NEONU */
            --neon-color: #00ff00; 
            --neon-shadow: 0 0 5px var(--neon-color), 0 0 10px var(--neon-color), 0 0 20px #fff, 0 0 30px var(--neon-color);
            
            /* Akcent dla przycisku RED i GREEN (jak na screenach) */
            --roulette-red: #ff3333;
            --roulette-green: #33cc33;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding: 0;
            text-align: center;
        }
        
        /* --- STICKY HEADER Z BANNEREM I LOGO (STABILNA WERSJA) --- */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: #000; 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4); 
            height: 150px; 
            display: flex; 
            align-items: center;
            justify-content: center;
        }

        header {
            /* Banner t≈Ça z Twojego obrazka */
            background-image: url('unnamed (1).jpg'); 
            background-size: cover; 
            background-position: center top;
            background-repeat: no-repeat;
            
            width: 100%;
            height: 100%; 
            border-top: 5px solid black; 
            border-bottom: 5px solid black; 
            position: relative; 
            z-index: 5;
            display: flex; 
            justify-content: center;
            align-items: center; 
        }

        /* Kontener dla logo, napisu i subtytu≈Çu - CENTRALNIE W BANNERZE */
        .header-center {
            position: absolute; 
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -10%); 
            
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 20; 
            
            background-color: transparent; 
            padding-bottom: 0;
        }

        /* AVATAR */
        .avatar-img {
            width: 70px; 
            height: 70px; 
            border-radius: 50%; 
            border: 4px solid var(--green-frog); 
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.8); 
            object-fit: cover;
            margin-top: 0; 
        }

        /* NEONOWY NAPIS */
        h1 { 
            margin: 5px 0 0 0; 
            font-family: 'Arial Black', sans-serif;
            font-size: 1.5rem; 
            text-transform: uppercase; 
            letter-spacing: 4px; 
            text-shadow: 0 0 5px #000, 0 0 10px #000, var(--neon-shadow); 
            color: var(--neon-color);
            line-height: 1;
        }
        
        .subtitle { 
            color: #ccc; 
            font-size: 0.7rem; 
            margin-top: 3px; 
            letter-spacing: 1px;
            text-shadow: 0 0 3px #000;
        }

        /* --- WALLET --- */
        .wallet-box {
            background: linear-gradient(180deg, #1e293b, #0f172a); 
            padding: 20px;
            border-radius: 15px; 
            margin-bottom: 30px; 
            border: 1px solid var(--green-frog); 
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.15); 
            margin-top: 20px; 
        }
        .balance-display { font-size: 2rem; font-weight: bold; color: var(--neon-color); margin: 10px 0; text-shadow: 0 0 10px rgba(0, 255, 0, 0.3); } 

        button {
            background-color: var(--green-frog); 
            color: #000; border: none; padding: 10px 20px;
            font-size: 1rem; font-weight: bold; cursor: pointer; border-radius: 6px; margin: 5px;
            transition: all 0.2s; box-shadow: 0 4px 0 #0f7647; 
        }
        button:active { transform: translateY(4px); box-shadow: none; }
        
        /* Naprawiony styl przycisku Dobierz ≈ªetony */
        .wallet-box button { 
            background:#334155 !important; 
            color:#fff !important; 
            border:1px solid #475569 !important; 
            box-shadow:none !important; 
            font-size: 0.85rem !important; 
            padding: 8px 15px !important;
        }
        
        /* --- IKONA USTAWIE≈É (ko≈Ço zƒôbate - FIX) --- */
        .settings-control {
            position: fixed; 
            bottom: 20px;
            right: 20px;
            z-index: 200;
        }
        .settings-icon { 
            cursor: pointer;
            width: 40px;
            height: 40px;
            line-height: 40px;
            border-radius: 50%;
            background-color: var(--card-bg);
            color: var(--green-frog); 
            border: 2px solid var(--green-frog); 
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.5); 
            font-size: 1.5rem;
            transition: transform 0.3s;
        }
        .settings-options {
            position: absolute;
            bottom: 50px;
            right: 0;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            width: 150px;
            display: none;
            padding: 10px 0;
        }
        .settings-options.active { display: block; }
        .setting-item {
            padding: 8px 15px;
            cursor: pointer;
            text-align: left;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        .setting-item:hover { background-color: #334155; }
        .setting-item span { margin-right: 5px; }

        /* --- STYLY GRY --- */
        .roulette-btn-red { background: var(--roulette-red) !important; color: white !important; box-shadow: 0 4px 0 #992d2d !important; }
        .roulette-btn-black { background: #111 !important; color: white !important; border: 1px solid #555 !important; box-shadow: 0 4px 0 #000 !important; }
        .roulette-btn-green { background: var(--roulette-green) !important; color: white !important; box-shadow: 0 4px 0 #0f7647 !important; }
        .game-section { display: grid; grid-template-columns: 1fr; gap: 20px; }
        @media(min-width: 768px) { .game-section { grid-template-columns: 1fr 1fr; } }
        @media(min-width: 1000px) { .game-section { grid-template-columns: 1fr 1fr 1fr; } } 
        .game-card { background-color: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid #334155; display: flex; flex-direction: column; align-items: center; text-align: center; }
        .slot-machine { display: flex; gap: 5px; margin: 15px 0; background: #000; padding: 10px; border-radius: 8px; border: 2px solid #555; }
        .reel { width: 70px; height: 70px; overflow: hidden; border-radius: 4px; background: #111; display: flex; align-items: center; justify-content: center; position: relative; }
        .slot-display { font-size: 4rem; color: #ffeb3b; line-height: 90px; transition: transform 0.5s; }
        .slot-payouts { font-size: 0.75rem; color: #aaa; text-align: left; width: 100%; margin-top: 10px; padding: 0 10px; }
        .slot-payouts div { display: flex; justify-content: space-between; margin-bottom: 2px; }

        .roulette-container { width: 200px; height: 200px; position: relative; margin: 20px auto; border-radius: 50%; overflow: hidden; border: 8px solid var(--green-frog); box-shadow: 0 0 20px rgba(34, 197, 94, 0.3); }
        .wheel-css { width: 100%; height: 100%; position: absolute; top: 0; left: 0; transform-origin: center; transition: transform 4s cubic-bezier(0.1, 0.7, 0.1, 1); }
        /* Definicja paska ruletki (Green-Red-Black) */
        .wheel-css::before { content: ""; position: absolute; top: -5%; left: -5%; width: 110%; height: 110%; border-radius: 50%; 
        background: conic-gradient(
            var(--roulette-green) 0% 6.66%, var(--roulette-red) 6.66% 13.32%, black 13.32% 20%, var(--roulette-red) 20% 26.66%, black 26.66% 33.32%,
            var(--roulette-red) 33.32% 40%, black 40% 46.66%, var(--roulette-red) 46.66% 53.32%, black 53.32% 60%, 
            var(--roulette-red) 60% 66.66%, black 66.66% 73.32%, var(--roulette-red) 73.32% 80%, black 80% 86.66%, 
            var(--roulette-red) 86.66% 93.32%, black 93.32% 100%
        ); }
        .wheel-center { width: 40px; height: 40px; border-radius: 50%; background: var(--green-frog); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; color: black; font-size: 1.2rem; z-index: 10; }
        .indicator { position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 25px solid var(--neon-color); z-index: 11; }

        .cards-area { min-height: 100px; display: flex; justify-content: center; align-items: center; gap: 5px; }
        .playing-card { background: white; border-radius: 6px; width: 60px; height: 90px; margin: 0 2px; position: relative; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5); display: flex; flex-direction: column; justify-content: space-between; align-items: center; padding: 5px; }
        .playing-card.red { color: red; }
        .playing-card.black { color: black; }
        .card-center { font-size: 2rem; font-weight: bold; line-height: 1; } /* Zmniejszony rozmiar czcionki */
        .card-corner { font-size: 0.8rem; position: absolute; top: 5px; left: 5px; line-height: 1; }
        .playing-card.hidden { background: repeating-linear-gradient(45deg, #10b981, #10b981 8px, #34d399 8px, #34d399 16px); color: transparent; border: 2px solid #fff; }
        .bj-label { font-size: 0.8rem; color: #888; margin-bottom: 5px; }

        .status-msg { margin-top: 15px; font-weight: bold; }
        .status-msg .win { color: var(--neon-color); text-shadow: 0 0 5px rgba(0, 255, 0, 0.5); }
        .status-msg .lose { color: var(--red); }
        .input-bet { padding: 8px; border-radius: 4px; border: 1px solid #475569; background-color: #1e293b; color: #fff; text-align: center; width: 80%; margin-bottom: 10px; }

        .win-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 500; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .win-overlay.show { opacity: 1; }
        .confetti { position: absolute; animation: fall 6s linear infinite; }
        @keyframes fall { 0% { opacity: 1; transform: translateY(0) rotate(0deg); } 100% { opacity: 0; transform: translateY(100vh) rotate(1080deg); } }
        
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); }
        .modal.active { display: flex; justify-content: center; align-items: center; }
        .modal-content { background-color: var(--card-bg); margin: auto; padding: 30px; border: 2px solid var(--green-frog); border-radius: 15px; width: 80%; max-width: 400px; text-align: center; box-shadow: 0 0 25px rgba(34, 197, 94, 0.4); }
        .close-btn { color: #aaa; float: right; font-size: 28px; font-weight: bold; position: absolute; right: 20px; top: 10px; }
        .token-option { background-color: #334155; padding: 12px; margin: 10px 0; border-radius: 8px; cursor: pointer; transition: background-color 0.2s; border: 1px solid #475569; }
        .token-option:hover { background-color: #475569; }
        .token-option span { color: var(--neon-color); font-weight: bold; float: right; }

        footer { margin-top: 30px; padding: 15px 0; font-size: 0.75rem; color: #666; border-top: 1px solid #333; }
    </style>
</head>
<body>

<audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>
<div id="win-overlay" class="win-overlay"></div>

<div class="settings-control">
    <div id="settings-options" class="settings-options">
        <div class="setting-item" onclick="toggleMusic()">
            <span id="music-status-icon">üîá</span><span id="music-status-text">W≈ÇƒÖcz Muzykƒô</span>
        </div>
    </div>
    <div class="settings-icon" onclick="toggleSettingsMenu()">‚öôÔ∏è</div>
</div>

<div id="token-modal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeTokenModal()">&times;</span>
        <h3>üí∞ Wymie≈Ñ $777 Tokeny</h3>
        <p style="color:#aaa; font-size:0.9rem;">Wybierz pakiet (symulacja)</p>
        <div class="token-option" onclick="buyTokens(1000)">Pakiet Srebrny: <span>1000 $777</span></div>
        <div class="token-option" onclick="buyTokens(5000)">Pakiet Z≈Çoty: <span>5000 $777</span></div>
        <div class="token-option" onclick="buyTokens(10000)">Pakiet Diamentowy: <span>10000 $777</span></div>
        <p style="margin-top:20px; font-size:0.8rem; color:#666;">*To jest symulacja. Nie dokonujesz prawdziwej wymiany.</p>
    </div>
</div>
<div class="sticky-header" id="sticky-header">
    <header>
        <div class="header-center">
            <img src="unnamed.jpg" alt="Pepe Casino" class="avatar-img" onerror="this.src='avatar.jpg'">
            
            <div class="header-text">
                <h1>777 CASINO</h1>
                <div class="subtitle">Official $777 Memecoin Playground</div>
            </div>
        </div>
    </header>
</div>
<div class="container">
    <div class="wallet-box">
        <div>TWOJE SALDO</div>
        <div class="balance-display"><span id="balance">1000</span> $777</div>
        <button onclick="openTokenModal()">+ Dobierz ≈ªetony</button>
    </div>

    <div class="game-section">
        
        <div class="game-card">
            <h2>SLOTY (777)</h2>
            <div style="margin-bottom:10px; color:#aaa;">Poczuj ducha Las Vegas</div>
            <input type="number" id="slots-bet" class="input-bet" placeholder="Kwota" value="50">
            <button onclick="spinSlots()">SPIN</button>
            <div class="slot-machine">
                <div class="reel"><div class="slot-display" id="reel1">üçí</div></div>
                <div class="reel"><div class="slot-display" id="reel2">üçí</div></div>
                <div class="reel"><div class="slot-display" id="reel3">üçí</div></div>
            </div>
            <div id="slots-result" class="status-msg"></div>
            <div class="slot-payouts">
                <div style="color:var(--green-frog);">Jackpot (7Ô∏è‚É£ 7Ô∏è‚É£ 7Ô∏è‚É£) <span>x10</span></div>
                <div style="color:var(--text);">Trzy takie same <span>x3</span></div>
                <div style="color:#666;">Dwie 7Ô∏è‚É£ <span>x2</span></div>
            </div>
        </div>

        <div class="game-card">
            <h2>RULETKA</h2>
            <div style="margin-bottom:10px; color:#aaa;">Obstaw kolor</div>
            <input type="number" id="roulette-bet" class="input-bet" placeholder="Kwota" value="100">
            <div style="display:flex; gap:5px; justify-content:center; width:100%;">
                <button onclick="spinRoulette('red')" class="roulette-btn-red">RED (x2)</button>
                <button onclick="spinRoulette('black')" class="roulette-btn-black">BLACK (x2)</button>
                <button onclick="spinRoulette('green')" class="roulette-btn-green">GREEN (x14)</button>
            </div>

            <div class="roulette-container">
                <div class="indicator"></div>
                <div class="wheel-css" id="wheel-css"></div>
                <div class="wheel-center">üíé</div>
            </div>
            <div id="roulette-result" class="status-msg"></div>
        </div>

        <div class="game-card">
            <h2>BLACKJACK</h2>
            <div style="margin-bottom:10px; color:#aaa;">Wbij 21, pokonaj Pepe</div>
            <input type="number" id="bj-bet" class="input-bet" placeholder="Kwota" value="100">
            
            <div style="width:100%; text-align:center;">
                <div class="bj-label">KRUPIER</div>
                <div id="dealer-area" class="cards-area"></div>
                <div class="bj-label" style="margin-top:10px;">TY</div>
                <div id="player-area" class="cards-area"></div>
            </div>

            <div id="bj-controls" style="margin-top:20px;">
                <button onclick="startBlackjack()" style="width:150px;">ROZDAJ</button>
            </div>
            <div id="bj-actions" style="display:none; margin-top:20px;">
                <button onclick="hit()">DOBIERZ</button>
                <button onclick="stand()" class="roulette-btn-red">STOP</button>
            </div>
            <div id="bj-result" class="status-msg"></div>
        </div>
    </div>
</div>

<footer>
    <p>$777 MEMECOIN CASINO - NO REAL MONEY INVOLVED<br>Created for the Community.</p>
</footer>

<script>
    // --- SKRYPTY GRY ---
    const audio = document.getElementById('bg-music');
    const settingsMenu = document.getElementById('settings-options');
    const musicStatusIcon = document.getElementById('music-status-icon');
    const musicStatusText = document.getElementById('music-status-text');
    audio.volume = 0.4;
    
    document.addEventListener('DOMContentLoaded', () => {
        audio.play().catch(e => {
            console.log("Blokada przeglƒÖdarki, muzyka czeka na interakcjƒô.");
            musicStatusIcon.innerText = 'üîá';
            musicStatusText.innerText = 'W≈ÇƒÖcz Muzykƒô';
        });
        // Inicjalizacja pustych kart (bez bugujƒÖcych cyfr)
        document.getElementById('dealer-area').innerHTML = '<div class="playing-card hidden"></div><div class="playing-card hidden"></div>';
        document.getElementById('player-area').innerHTML = '<div class="playing-card hidden"></div><div class="playing-card hidden"></div>';
    });

    function toggleSettingsMenu() { settingsMenu.classList.toggle('active'); }
    function toggleMusic() {
        if (audio.paused) { audio.play().then(() => { musicStatusIcon.innerText = 'üîä'; musicStatusText.innerText = 'Wycisz Muzykƒô'; }).catch(e => console.error("B≈ÇƒÖd odtwarzania:", e)); } 
        else { audio.pause(); musicStatusIcon.innerText = 'üîá'; musicStatusText.innerText = 'W≈ÇƒÖcz Muzykƒô'; }
    }
    audio.addEventListener('playing', () => { musicStatusIcon.innerText = 'üîä'; musicStatusText.innerText = 'Wycisz Muzykƒô'; });
    audio.addEventListener('pause', () => { musicStatusIcon.innerText = 'üîá'; musicStatusText.innerText = 'W≈ÇƒÖcz Muzykƒô'; });
    musicStatusIcon.innerText = 'üîá';
    musicStatusText.innerText = 'W≈ÇƒÖcz Muzykƒô';

    // PORTFEL
    let balance = 1000;
    if(localStorage.getItem('777balance')) { balance = parseInt(localStorage.getItem('777balance')); document.getElementById('balance').innerText = balance; }
    function updateBalance(amount) {
        balance += amount;
        document.getElementById('balance').innerText = balance;
        localStorage.setItem('777balance', balance);
    }
    function openTokenModal() { document.getElementById('token-modal').classList.add('active'); }
    function closeTokenModal() { document.getElementById('token-modal').classList.remove('active'); }
    function buyTokens(amount) { updateBalance(amount); closeTokenModal(); }

    // ANIMACJA WYGRANEJ
    function triggerWinAnimation() {
        const overlay = document.getElementById('win-overlay');
        overlay.classList.add('show');
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.width = `${Math.random() * 8 + 5}px`;
            confetti.style.height = `${Math.random() * 8 + 5}px`;
            confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
            confetti.style.position = 'fixed';
            confetti.style.left = `${Math.random() * 100}vw`;
            confetti.style.top = `${-20}px`;
            confetti.style.opacity = Math.random();
            confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            confetti.style.transition = `transform ${Math.random() * 4 + 2}s linear, top ${Math.random() * 4 + 2}s linear`;
            setTimeout(() => {
                confetti.style.top = '100vh';
                confetti.style.transform += `translateX(${Math.random() * 500 - 250}px) rotate(${Math.random() * 1080}deg)`;
            }, 10);
            overlay.appendChild(confetti);
            setTimeout(() => confetti.remove(), 6000);
        }
        setTimeout(() => { overlay.classList.remove('show'); }, 3000);
    }

    // LOGIKA SLOTS (Bez zmian)
    const symbols = ['üçí', 'üçã', '7Ô∏è‚É£'];
    let isSlotsSpinning = false;
    function getRandomSymbol() { return symbols[Math.floor(Math.random() * symbols.length)]; }
    function animateReel(reelId, finalSymbol, duration) {
        const reel = document.getElementById(reelId);
        const symbolHeight = 90; 
        const totalSymbols = 20; 
        let animationContent = '';
        for (let i = 0; i < totalSymbols - 1; i++) { animationContent += getRandomSymbol() + '<br>'; }
        animationContent += finalSymbol;
        reel.innerHTML = animationContent;
        const finalPosition = (totalSymbols - 1) * symbolHeight;
        reel.style.transition = 'none';
        reel.style.transform = `translateY(0px)`;
        setTimeout(() => {
            reel.style.transition = `transform ${duration}ms cubic-bezier(0.1, 0.7, 0.1, 1)`;
            reel.style.transform = `translateY(-${finalPosition}px)`;
        }, 50);
    }
    function spinSlots() {
        if(isSlotsSpinning) return;
        const bet = parseInt(document.getElementById('slots-bet').value);
        if(isNaN(bet) || bet <= 0 || bet > balance) return alert("B≈ÇƒÖd stawki! Za ma≈Ço ≈ºeton√≥w lub niepoprawna stawka.");
        updateBalance(-bet);
        isSlotsSpinning = true;
        document.getElementById('slots-result').innerText = "Krƒôcƒô...";
        const results = [getRandomSymbol(), getRandomSymbol(), getRandomSymbol()];
        animateReel('reel1', results[0], 2500);
        animateReel('reel2', results[1], 3500);
        animateReel('reel3', results[2], 4500);
        setTimeout(() => {
            const [s1, s2, s3] = results;
            let winMultiplier = 0;
            let winMsg = `<span class="lose">PRZEGRANA</span>`;
            if (s1 === s2 && s2 === s3) {
                if (s1 === '7Ô∏è‚É£') { winMultiplier = 10; winMsg = `<span class="win" style="font-size:1.5rem;">JACKPOT! x10!</span>`; } 
                else { winMultiplier = 3; winMsg = `<span class="win">TRZY TAKIE SAME! x3!</span>`; }
            } else if ((s1 === '7Ô∏è‚É£' && s2 === '7Ô∏è‚É£') || (s1 === '7Ô∏è‚É£' && s3 === '7Ô∏è‚É£') || (s2 === '7Ô∏è‚É£' && s3 === '7Ô∏è‚É£')) {
                winMultiplier = 2; winMsg = `<span class="win">DWIE 7Ô∏è‚É£! x2!</span>`;
            }
            const winAmount = bet * winMultiplier;
            updateBalance(winAmount);
            if (winAmount > 0) {
                 document.getElementById('slots-result').innerHTML = winMsg + `<br>WYGRANA: ${winAmount} $777`;
                 triggerWinAnimation();
            } else { document.getElementById('slots-result').innerHTML = winMsg; }
            isSlotsSpinning = false;
        }, 4600); 
    }

    // LOGIKA ROULETTE (POPRAWIONA)
    let isRouletteSpinning = false;
    // Mapowanie kolor√≥w na sektor (0 to Green, reszta: 1-7 Red, 8-14 Black)
    const sectors = [
        { color: 'green', angle: 0 }, 
        { color: 'red', angle: 24 }, { color: 'black', angle: 48 },
        { color: 'red', angle: 72 }, { color: 'black', angle: 96 },
        { color: 'red', angle: 120 }, { color: 'black', angle: 144 },
        { color: 'red', angle: 168 }, { color: 'black', angle: 192 },
        { color: 'red', angle: 216 }, { color: 'black', angle: 240 },
        { color: 'red', angle: 264 }, { color: 'black', angle: 288 },
        { color: 'red', angle: 312 }, { color: 'black', angle: 336 }
    ];

    function spinRoulette(choice) {
        if(isRouletteSpinning) return;
        const bet = parseInt(document.getElementById('roulette-bet').value);
        if(isNaN(bet) || bet <= 0 || bet > balance) return alert("B≈ÇƒÖd stawki!");
        updateBalance(-bet);
        isRouletteSpinning = true;
        document.getElementById('roulette-result').innerText = "Krƒôcƒô...";
        const wheel = document.getElementById('wheel-css');
        wheel.style.transition = 'none';
        wheel.style.transform = 'rotate(0deg)';
        
        // Losujemy index sektora (0 do 14)
        const sectorIndex = Math.floor(Math.random() * sectors.length); 
        const resultColor = sectors[sectorIndex].color;
        
        // KƒÖt do obrotu (centerAngle to ≈õrodek danego sektora)
        const centerAngle = sectors[sectorIndex].angle + 12; // 12 to po≈Çowa sektora (24/2)
        const fullSpins = 6; 
        const randomOffset = Math.random() * 10 - 5; 
        const finalSpin = fullSpins * 360 - centerAngle + randomOffset;

        setTimeout(() => {
            wheel.style.transition = 'transform 3s cubic-bezier(0.1, 0.7, 0.1, 1)';
            wheel.style.transform = `rotate(${finalSpin}deg)`;
        }, 50);

        setTimeout(() => {
            let win = 0;
            if(choice === resultColor) {
                win = bet * (resultColor === 'green' ? 14 : 2);
                updateBalance(win);
                document.getElementById('roulette-result').innerHTML = `<span class="win">WYGRANA: ${win} $777 (${resultColor.toUpperCase()})</span>`;
                triggerWinAnimation();
            } else { 
                document.getElementById('roulette-result').innerHTML = `<span class="lose">PRZEGRANA (${resultColor.toUpperCase()})</span>`; 
            }
            isRouletteSpinning = false;
        }, 3100);
    }
    
    // LOGIKA BLACKJACKA (POPRAWIONA FUNKCJA RENDEROWANIA)
    let dealerHand = [], playerHand = [], bjBet = 0, bjGameOn = false;
    const suits = ['‚ô•', '‚ô¶', '‚ô£', '‚ô†'];
    const values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
    
    // Konwersja J, Q, K, A na symbole Unicode dla czcionki
    function getCardSymbol(val) {
        if (val === 'J') return 'J'; 
        if (val === 'Q') return 'Q';
        if (val === 'K') return 'K';
        if (val === 'A') return 'A';
        return val;
    }

    function getCard() {
        const val = values[Math.floor(Math.random() * values.length)];
        const suit = suits[Math.floor(Math.random() * suits.length)];
        return { val, suit };
    }

    // NAPRAWIONA FUNKCJA RENDEROWANIA KARTY
    function renderCard(card, isHidden = false) {
        if(isHidden) return `<div class="playing-card hidden"></div>`; 
        
        let colorClass = (card.suit === '‚ô•' || card.suit === '‚ô¶') ? 'red' : 'black';
        const displayVal = getCardSymbol(card.val);

        return `
            <div class="playing-card ${colorClass}">
                <div class="card-corner">${displayVal}<br>${card.suit}</div>
                <div class="card-center">${displayVal}</div>
            </div>
        `;
    }

    function drawTable(hideDealerSecond) {
        const dDiv = document.getElementById('dealer-area');
        const pDiv = document.getElementById('player-area');
        dDiv.innerHTML = "";
        dealerHand.forEach((c, i) => { dDiv.innerHTML += renderCard(c, (hideDealerSecond && i === 1)); });
        pDiv.innerHTML = "";
        playerHand.forEach(c => { pDiv.innerHTML += renderCard(c); });
    }
    function getPoints(hand) {
        let pts = 0, aces = 0;
        hand.forEach(c => {
            if(['J','Q','K'].includes(c.val)) pts += 10;
            else if(c.val === 'A') { pts += 11; aces++; }
            else pts += parseInt(c.val);
        });
        while(pts > 21 && aces > 0) { pts -= 10; aces--; }
        return pts;
    }
    function startBlackjack() {
        const bet = parseInt(document.getElementById('bj-bet').value);
        if(isNaN(bet) || bet <= 0 || bet > balance) return alert("B≈ÇƒÖd stawki!");
        updateBalance(-bet);
        bjBet = bet;
        bjGameOn = true;
        document.getElementById('bj-result').innerText = "";
        document.getElementById('bj-controls').style.display = 'none';
        document.getElementById('bj-actions').style.display = 'block';
        dealerHand = [getCard(), getCard()];
        playerHand = [getCard(), getCard()];
        drawTable(true);
        if(getPoints(playerHand) === 21) stand();
    }
    function hit() {
        if(!bjGameOn) return;
        playerHand.push(getCard());
        drawTable(true);
        if(getPoints(playerHand) > 21) endBj("FURA! Przegra≈Çe≈õ.");
    }
    function stand() {
        if(!bjGameOn) return;
        while(getPoints(dealerHand) < 17) dealerHand.push(getCard());
        drawTable(false);
        const p = getPoints(playerHand);
        const d = getPoints(dealerHand);
        if(d > 21) endBj("Krupier ma Furƒô! WYGRYWASZ!", true);
        else if(p > d) endBj("Masz wiƒôcej! WYGRANA!", true);
        else if(p === d) endBj("REMIS (Zwrot).", false, true);
        else endBj("Krupier ma wiƒôcej. Przegra≈Çe≈õ.");
    }
    function endBj(msg, win = false, draw = false) {
        bjGameOn = false;
        const resDiv = document.getElementById('bj-result');
        resDiv.innerText = msg;
        resDiv.className = "status-msg " + (win ? "win" : (draw ? "" : "lose"));
        if(win) { updateBalance(bjBet * 2); triggerWinAnimation(); }
        if(draw) updateBalance(bjBet);
        document.getElementById('bj-controls').style.display = 'block';
        document.getElementById('bj-actions').style.display = 'none';
    }
</script>

</body>
</html>
